tcib_gather_files:
- /usr/share/tcib/container-images/kolla/cinder-volume/extend_start.sh
- /usr/share/tcib/container-images/kolla/cinder-volume/cinder-volume-sudoers
tcib_copies:
- /usr/share/tcib/container-images/kolla/cinder-volume/extend_start.sh /usr/local/bin/kolla_extend_start
- /usr/share/tcib/container-images/kolla/cinder-volume/cinder-volume-sudoers /etc/sudoers.d/cinder-volume-sudoers
tcib_envs:
  MALLOC_ARENA_MAX: 1
  MALLOC_MMAP_THRESHOLD_: 131072
  MALLOC_TRIM_THRESHOLD_: 262144
tcib_actions:
- run: dnf -y install {{ tcib_packages.common | join(' ') }} && dnf clean all && rm -rf /var/cache/dnf
- run: chmod 755 /usr/local/bin/kolla_extend_start && chmod 440 /etc/sudoers.d/cinder-volume-sudoers && mkdir -p /etc/libqb
tcib_packages:
  common:
  - pacemaker
  - pacemaker-remote
  - pcs
  - python3-cinderlib
tcib_user: cinder
